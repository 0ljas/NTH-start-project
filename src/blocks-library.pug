extends pug/layout.pug

block meta
  title Библиотека
  meta(name='description', content='')

block append head
  link(rel='stylesheet', href='css/blocks-library.css')
  style.
    .components-demo {
      display: block;
      padding: 1em;
      margin: auto;
      max-width: 1200px;
      font-family: sans-serif;
    }
    .off-canvas__aside {
      padding-top: 1em;
      padding-bottom: 1em;
    }
  script.
    document.addEventListener('DOMContentLoaded', function(){

      // наполнение бокого меню
      var demoBlocks = document.querySelectorAll('.blocks-library__item');
      var offCanvasMenu = '<li class="menu__item"><a class="menu__link" data-toggle-native="off-canvas" href="/">Главная страница</a></li><li class="menu__item"><a class="menu__link" data-toggle-native="off-canvas" href="https://github.com/nicothin/NTH-start-project">Исходный репозиторий</a></li><li class="menu__item menu__item--separator"><a class="menu__link" data-toggle-native="off-canvas" href="http://nicothin.github.io/NTH-start-project/blocks-demo.html">Демка на github pages</a></li>';
      for (var i=0; i<demoBlocks.length; i++){
        var classes = 'menu__item';
        var block = demoBlocks[i];
        if (block.classList.contains('blocks-library__item--menusep')) { classes += ' menu__item--separator'; }
        offCanvasMenu += '<li class="'+classes+'"><a class="menu__link" data-toggle-native="off-canvas" href="#'+block.getAttribute('id')+'">'+block.querySelector('.blocks-library__item-title').textContent+'</a></li>';
      }
      var offCanvasMenuContent = document.getElementById('off-canvas-menu');
      offCanvasMenuContent.innerHTML = offCanvasMenu;

      // просмотр примера кода для блока
      var codeShowTriggers = document.querySelectorAll('.blocks-library__code-show-trigger');
      for (var i = 0; i < codeShowTriggers.length; i++) {
        codeShowTriggers[i].addEventListener('click', function(){
          this.closest('.blocks-library__code-wrapper').querySelector('.blocks-library__code').classList.toggle('blocks-library__code--shown');
        });
      }

    });
  //- script(src='js/SOME.js')

block off-canvas
  ul#off-canvas-menu.menu

block header


block content

  //- Спрайт с картинкой папки (картинки перед заголовками с названием блоков)
  svg(xmlns='http://www.w3.org/2000/svg', style='display:none')
    symbol#folder(viewbox='0 0 60 60')
      path(d='M56.98 11.5H28.02V6.52c0-1.665-1.355-3.02-3.02-3.02H3.02C1.353 3.5 0 4.854 0 6.52v46.96c0 1.665 1.354 3.02 3.02 3.02h53.96c1.665 0 3.02-1.354 3.02-3.02V14.52c0-1.666-1.354-3.02-3.02-3.02zM58 53.48c0 .563-.457 1.02-1.02 1.02H3.02c-.563 0-1.02-.457-1.02-1.02V22.5h56v30.98zM2 20.5V6.52c0-.563.457-1.02 1.02-1.02H25c.562 0 1.02.457 1.02 1.02v6.98h30.96c.563 0 1.02.457 1.02 1.02v5.98H2z')
      path(d='M19 33.5h14c.552 0 1-.447 1-1s-.448-1-1-1H19c-.552 0-1 .447-1 1s.448 1 1 1zm0 6h22c.552 0 1-.447 1-1s-.448-1-1-1H19c-.552 0-1 .447-1 1s.448 1 1 1zm0 6h22c.552 0 1-.447 1-1s-.448-1-1-1H19c-.552 0-1 .447-1 1s.448 1 1 1z')

  //- Вывод блока библиотеки
  mixin block-lib(id, title, sep)
    section.blocks-library__item(id=id)(class= sep ? 'blocks-library__item--menusep' : '')
      h2.blocks-library__item-title
        a(href=repoUrl + '/tree/master/src/blocks/' + id, class="blocks-library__item-title-link", title="Папка блока в репозитории")
          svg(width="20", height="20")
            use(xlink:href="#folder")
        != title
      block

  //- Вывод фрагмента кода в блоке библиотеки
  mixin block-lib-code(id, hideBurger)
    .blocks-library__code-wrapper
      span.blocks-library__code-show-trigger(title='Показать код')
        - if (!hideBurger)
            i.blocks-library__code-icon
      .blocks-library__code(id=id)
        block

  //- Пример вызова примесей вывода блока:
    +block-lib('close', 'Закрыть', false)
      include:markdown-it(linkify) blocks/close/readme.md
      div
        +close('Закрыть')
      +block-lib-code()
        include:show-code() blocks/close/close.pug



  h1 Страница демонстрации блоков, доступных на #[a(href="index.html") проекте]

  +block-lib('page', 'Страница', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/page/readme.md
    +block-lib-code()
      pre.code
        code &lt;!DOCTYPE html>
        code &lt;html class="no-js  page" lang="ru">
        code &lt;head>...&lt;/head>
        code &lt;body>
        code   &lt;div class="page__inner">
        code     &lt;div class="page__content">Основное содержимое&lt;/div>
        code     &lt;div class="page__footer-wrapper">Прибитый «подвал»&lt;/div>
        code   &lt;/div>
        code &lt;/body>
        code &lt;/html>

  +block-lib('typo', 'Текст, теги', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/typo/readme.md

  +block-lib('sprite-svg', 'SVG-спрайт c <a href="https://github.com/w0rm/gulp-svgstore">gulp-svgstore</a>', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/sprite-svg/readme.md

  +block-lib('sprite-png', 'PNG-спрайт с <a href="https://github.com/Ensighten/spritesmith">spritesmith</a>', true)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/sprite-png/readme.md

  +block-lib('close', 'Закрыть', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/close/readme.md
    div
      +close('Закрыть')
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/close/close.pug

  +block-lib('burger', 'Бургер', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/burger/readme.md
    div
      +burger('Показать пример кода', 'burger-code', 'blocks-library__code--shown')
    +block-lib-code('burger-code', true)
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/burger/burger.pug

  +block-lib('main-nav', 'Главная навигация', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/main-nav/readme.md
    +main-nav('1')
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/main-nav/main-nav.pug

  +block-lib('code', 'Код', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/code/readme.md
    +code()
      code &lt;div class="some">...&lt;/div>
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/code/code.pug

  +block-lib('thumb', 'Картинки-миниатюры', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/thumb/readme.md
    +thumb('img/joker.jpg', 'Джокер', 300, 200)
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/thumb/thumb.pug

  +block-lib('alert', 'Сообщения', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/alert/readme.md
    +alert()
      p Обычное сообщение
    +alert('Заголовок', 'warning, some-mod-name')
      p Блок сообщения с модификаторами.
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/alert/alert.pug

  +block-lib('menu', 'Меню', true)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/menu/readme.md
    -
      var myMenu = [
        {
          'text':'Пункт1',
          'url':'/',
        },
        {
          'text':'Пункт2',
          'url':'/',
          'mods': 'separator, active',
        },
        {
          'text':'Пункт3',
          'url':'/',
        },
      ];
    +menu(myMenu)
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/menu/menu.pug

  +block-lib('btn', 'Кнопка', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/btn/readme.md
    p.
      #[+btn('Кнопка-ссылка')(href='/')]
      #[+btn('Кнопка-input', '', true)(name='submit')]
      #[+btn('Кнопка-button', 'main')]
    p.
      #[+btn('Кнопка-ссылка', 'disabled')(href='/')]
      #[+btn('Кнопка-input', '', true)(name='submit', disabled='')]
      #[+btn('Кнопка-button', 'main')(disabled='')]
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/btn/btn.pug

  +block-lib('field-text', 'Текстовое поле', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-text/readme.md
    +field-text({
      title: 'Текстовое поле',
      helpText: 'Подсказка под полем',
      isTextarea: true,
      mods: '',
      attrs: {
        name: 'test',
        placeholder: 'Подсказка',
      }
    })
    +field-text({
      title: 'Текстовое поле',
      helpText: 'Описание ошибки',
      mods: 'error',
    })
    +field-text()
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-text/field-text.pug

  +block-lib('field-checkbox', 'Флажок/чекбокс', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-checkbox/readme.md
    +field-checkbox([
      {
        title: 'Чекбокс без группы',
        helpText: 'Отдельно расположенный чекбокс',
        attrs: {
          name: 'check0',
        }
      },
    ])
    +field-checkbox([
      {
        title: 'Чекбокс первый',
        helpText: 'И, возможно, единственный',
        mods: 'error',
        attrs: {
          name: 'check1',
          checked: true,
        }
      },
      {
        title: 'Чекбокс второй',
        helpText: 'А, нет. Не единственный...',
        attrs: {
          name: 'check2',
        }
      },
    ], 'Общее необязательное название')
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-checkbox/field-checkbox.pug

  +block-lib('field-radio', 'Радиокнопки', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-radio/readme.md
    +field-radio([
      {
        title: 'Первый',
        helpText: 'И, возможно, единственный',
        attrs: {
          name: 'radio',
          checked: true,
        }
      },
      {
        title: 'Второй',
        helpText: 'А, нет. Не единственный...',
        attrs: {
          name: 'radio',
        }
      },
    ], 'Общее необязательное название')
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-radio/field-radio.pug

  +block-lib('field-toggler', 'Переключатель', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-toggler/readme.md
    +field-toggler([
      {
        title: 'Одиночный переключатель',
        helpText: 'Это чекбокс, на самом деле',
        attrs: {
          name: 'check10',
        }
      },
    ])
    +field-toggler([
      {
        title: 'Переключатель 1',
        helpText: 'Подсказка',
        attrs: {
          name: 'check11',
          checked: true,
        }
      },
      {
        title: 'Переключатель 2',
        helpText: 'Подсказка',
        mods: 'some',
        attrs: {
          name: 'check11',
        }
      },
    ], 'Две радиокнопки', true)
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-toggler/field-toggler.pug

  +block-lib('field-file', 'Файл', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-file/readme.md
    +field-file({
      title: 'Название',
      helpText: 'Подсказка',
      attrs: {
        name: 'commentFile',
        multiple: true,
      },
      text: {
        selectText: 'Выберите файл(ы)',
        nothingText: 'Ничего не выбрано',
        flesSelectedText: 'Выбрано файлов:',
      },
    })
    +field-file({
      helpText: 'Ошибка',
      mods: 'error',
      attrs: {
        name: 'commentFile3',
      },
    })
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-file/field-file.pug

  +block-lib('field-range', 'Ползунок', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-range/readme.md
    +field-range({
      title: 'Название',
      helpText: 'Подсказка',
      mods: '',
      attrs: {
        name: 'counter',
        min: '1',
        max: '100',
        step: '1',
        value: '40'
      }
    })
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-range/field-range.pug

  +block-lib('field-select', 'Селекты', false)
    include:markdown-it(linkify html='true' typographer='true' quotes='«»') blocks/field-select/readme.md
    +field-select(
      'Название селекта',
      {
        name: 'select0',
        id: 'select-demo0'
      },
      [
        {
          title: 'Опция 1',
          attrs: {
            value: 'val06',
          }
        },
        {
          title: 'Опция 2',
          attrs: {
            value: 'val05',
          }
        },
      ],
      'Подсказка',
      ''
    )
    +field-select(
      'Название селекта',
      {
        name: 'select',
        id: 'select-demo'
      },
      [
        {
          attrs: {
            label: 'Группа',
          },
          child: [
            {
              title: 'Опция1',
              attrs: {
                value: 'val01',
              }
            },
            {
              title: 'Опция2',
              attrs: {
                value: 'val02',
              }
            },
          ]
        },
        {
          title: 'Опция вне группы',
          attrs: {
            value: 'val03',
          }
        }
      ],
      'Подсказка',
      ''
    )
    +block-lib-code()
      include:show-code(first-line="//- Pug-файл этого блока:") blocks/field-select/field-select.pug



  .burger.blocks-library__menu-toggler(data-toggle="off-canvas")
    span(data-toggle="off-canvas")



block footer
